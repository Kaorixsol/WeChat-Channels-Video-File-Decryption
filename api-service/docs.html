<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WeChat Decrypt API - æ¥å£æ–‡æ¡£</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .status-badge {
            display: inline-block;
            padding: 8px 16px;
            background: rgba(255,255,255,0.2);
            border-radius: 20px;
            margin-top: 20px;
            font-size: 0.9em;
        }

        .status-badge.online {
            background: rgba(72,187,120,0.3);
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
        }

        .section h2 {
            color: #667eea;
            font-size: 1.8em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }

        .section h3 {
            color: #764ba2;
            font-size: 1.3em;
            margin-top: 30px;
            margin-bottom: 15px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .info-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .info-card .label {
            font-weight: bold;
            color: #666;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .info-card .value {
            font-size: 1.1em;
            color: #333;
        }

        .endpoint {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 25px;
            border-left: 4px solid #764ba2;
        }

        .endpoint-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .method {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.85em;
            margin-right: 10px;
        }

        .method.get {
            background: #48bb78;
            color: white;
        }

        .method.post {
            background: #4299e1;
            color: white;
        }

        .endpoint-path {
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
            color: #333;
        }

        .endpoint-desc {
            color: #666;
            margin-bottom: 15px;
        }

        .params, .response {
            margin-top: 15px;
        }

        .params h4, .response h4 {
            color: #764ba2;
            font-size: 1em;
            margin-bottom: 10px;
        }

        .param-item {
            background: white;
            padding: 12px;
            border-radius: 4px;
            margin-bottom: 8px;
            border: 1px solid #e2e8f0;
        }

        .param-name {
            font-family: 'Courier New', monospace;
            font-weight: bold;
            color: #667eea;
        }

        .param-required {
            color: #e53e3e;
            font-size: 0.85em;
            margin-left: 5px;
        }

        .param-type {
            color: #48bb78;
            font-size: 0.9em;
            margin-left: 5px;
        }

        .param-desc {
            color: #666;
            margin-top: 5px;
            font-size: 0.95em;
        }

        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 6px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.5;
            margin-top: 10px;
            white-space: pre;
        }

        .code-block .comment {
            color: #68d391;
        }

        .code-block .string {
            color: #f6ad55;
        }

        .code-block .keyword {
            color: #9f7aea;
        }

        .feature-list {
            list-style: none;
            padding: 0;
        }

        .feature-list li {
            padding: 12px 0;
            padding-left: 30px;
            position: relative;
        }

        .feature-list li:before {
            content: "âœ…";
            position: absolute;
            left: 0;
        }

        .footer {
            background: #f8f9fa;
            padding: 30px;
            text-align: center;
            color: #666;
        }

        .footer a {
            color: #667eea;
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        .quick-links {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .btn {
            display: inline-block;
            padding: 10px 20px;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            transition: background 0.3s;
        }

        .btn:hover {
            background: #764ba2;
        }

        .btn-secondary {
            background: #4299e1;
        }

        .btn-secondary:hover {
            background: #3182ce;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 20px;
            }

            .info-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¬ WeChat Decrypt API</h1>
            <div class="subtitle">åŸºäº Playwright æµè§ˆå™¨è‡ªåŠ¨åŒ–çš„ RPC è§£å¯†æœåŠ¡</div>
            <div class="status-badge online" id="statusBadge">
                ğŸŸ¢ æœåŠ¡è¿è¡Œä¸­
            </div>
        </div>

        <div class="content">
            <!-- æœåŠ¡ä¿¡æ¯ -->
            <div class="section">
                <h2>ğŸ“Š æœåŠ¡ä¿¡æ¯</h2>
                <div class="info-grid">
                    <div class="info-card">
                        <div class="label">æœåŠ¡åç§°</div>
                        <div class="value" id="serviceName">WeChat Decrypt API</div>
                    </div>
                    <div class="info-card">
                        <div class="label">ç‰ˆæœ¬</div>
                        <div class="value" id="version">2.0.0</div>
                    </div>
                    <div class="info-card">
                        <div class="label">å¼•æ“</div>
                        <div class="value" id="engine">Playwright + Chromium</div>
                    </div>
                    <div class="info-card">
                        <div class="label">WASM çŠ¶æ€</div>
                        <div class="value" id="wasmStatus">æ£€æŸ¥ä¸­...</div>
                    </div>
                </div>
            </div>

            <!-- ç‰¹æ€§ -->
            <div class="section">
                <h2>âœ¨ æ ¸å¿ƒç‰¹æ€§</h2>
                <ul class="feature-list">
                    <li>100% å…¼å®¹å¾®ä¿¡å®˜æ–¹ WASM æ¨¡å— (v1.2.46)</li>
                    <li>åœ¨çœŸå® Chromium æµè§ˆå™¨ä¸­æ‰§è¡Œ Isaac64 ç®—æ³•</li>
                    <li>RPC æ¶æ„ï¼šNode.js â†” Browser é€šä¿¡</li>
                    <li>æ”¯æŒæœ€å¤§ 500MB è§†é¢‘æ–‡ä»¶</li>
                    <li>RESTful API è®¾è®¡ï¼Œæ˜“äºé›†æˆ</li>
                    <li>Docker å®¹å™¨åŒ–éƒ¨ç½²</li>
                    <li>è‡ªåŠ¨å¥åº·æ£€æŸ¥å’Œç›‘æ§</li>
                </ul>
            </div>

            <!-- API ç«¯ç‚¹ -->
            <div class="section">
                <h2>ğŸ”Œ API ç«¯ç‚¹</h2>

                <!-- GET / -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method get">GET</span>
                        <span class="endpoint-path">/</span>
                    </div>
                    <div class="endpoint-desc">è·å–æœåŠ¡ä¿¡æ¯å’Œå¯ç”¨ç«¯ç‚¹åˆ—è¡¨</div>

                    <div class="response">
                        <h4>å“åº”ç¤ºä¾‹ï¼š</h4>
                        <div class="code-block">{
  <span class="string">"service"</span>: <span class="string">"WeChat Channels Video Decryption API"</span>,
  <span class="string">"version"</span>: <span class="string">"2.0.0"</span>,
  <span class="string">"engine"</span>: <span class="string">"Playwright + Chromium"</span>,
  <span class="string">"endpoints"</span>: { ... }
}</div>
                    </div>
                </div>

                <!-- GET /health -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method get">GET</span>
                        <span class="endpoint-path">/health</span>
                    </div>
                    <div class="endpoint-desc">å¥åº·æ£€æŸ¥ï¼Œè¿”å›æœåŠ¡å’Œ WASM æ¨¡å—çŠ¶æ€</div>

                    <div class="response">
                        <h4>å“åº”ç¤ºä¾‹ï¼š</h4>
                        <div class="code-block">{
  <span class="string">"status"</span>: <span class="string">"ok"</span>,
  <span class="string">"wasm"</span>: {
    <span class="string">"loaded"</span>: <span class="keyword">true</span>,
    <span class="string">"timestamp"</span>: <span class="string">"2024-01-15T10:30:00.000Z"</span>
  }
}</div>
                    </div>
                </div>

                <!-- POST /api/keystream -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method post">POST</span>
                        <span class="endpoint-path">/api/keystream</span>
                    </div>
                    <div class="endpoint-desc">ç”Ÿæˆ Isaac64 å¯†é’¥æµï¼ˆ128KBï¼‰</div>

                    <div class="params">
                        <h4>è¯·æ±‚å‚æ•°ï¼š</h4>
                        <div class="param-item">
                            <span class="param-name">decode_key</span>
                            <span class="param-required">(å¿…éœ€)</span>
                            <span class="param-type">string/number</span>
                            <div class="param-desc">è§£å¯†å¯†é’¥ï¼Œä» API å“åº”çš„ $.data.object_desc.media[0].decode_key è·å–</div>
                        </div>
                        <div class="param-item">
                            <span class="param-name">format</span>
                            <span class="param-type">string</span>
                            <div class="param-desc">è¾“å‡ºæ ¼å¼ï¼š'hex'ï¼ˆé»˜è®¤ï¼‰æˆ– 'base64'</div>
                        </div>
                    </div>

                    <div class="code-block">curl -X POST http://localhost:3000/api/keystream \
  -H <span class="string">"Content-Type: application/json"</span> \
  -d <span class="string">'{"decode_key": "2136343393", "format": "hex"}'</span></div>

                    <div class="response">
                        <h4>å“åº”ç¤ºä¾‹ï¼š</h4>
                        <div class="code-block">{
  <span class="string">"decode_key"</span>: <span class="string">"2136343393"</span>,
  <span class="string">"keystream"</span>: <span class="string">"9c87e6946a410182..."</span>,
  <span class="string">"format"</span>: <span class="string">"hex"</span>,
  <span class="string">"size"</span>: 131072,
  <span class="string">"duration_ms"</span>: 45
}</div>
                    </div>
                </div>

                <!-- POST /api/decrypt -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method post">POST</span>
                        <span class="endpoint-path">/api/decrypt</span>
                    </div>
                    <div class="endpoint-desc">å®Œæ•´è§†é¢‘è§£å¯†ï¼ˆå‰ 128KB XOR è§£å¯†ï¼‰</div>

                    <div class="params">
                        <h4>è¯·æ±‚å‚æ•°ï¼ˆmultipart/form-dataï¼‰ï¼š</h4>
                        <div class="param-item">
                            <span class="param-name">decode_key</span>
                            <span class="param-required">(å¿…éœ€)</span>
                            <span class="param-type">string</span>
                            <div class="param-desc">è§£å¯†å¯†é’¥</div>
                        </div>
                        <div class="param-item">
                            <span class="param-name">video</span>
                            <span class="param-required">(å¿…éœ€)</span>
                            <span class="param-type">file</span>
                            <div class="param-desc">åŠ å¯†çš„ MP4 è§†é¢‘æ–‡ä»¶ï¼ˆæœ€å¤§ 500MBï¼‰</div>
                        </div>
                    </div>

                    <div class="code-block">curl -X POST http://localhost:3000/api/decrypt \
  -F <span class="string">"decode_key=2136343393"</span> \
  -F <span class="string">"video=@encrypted.mp4"</span> \
  -o decrypted.mp4</div>

                    <div class="response">
                        <h4>å“åº”ï¼š</h4>
                        <div class="code-block"><span class="comment"># è¿”å›è§£å¯†åçš„ MP4 è§†é¢‘æ–‡ä»¶ï¼ˆbinaryï¼‰</span>
Content-Type: video/mp4
Content-Disposition: attachment; filename=<span class="string">"decrypted_xxxxx.mp4"</span>
X-Decrypt-Duration: <span class="string">1295</span></div>
                    </div>
                </div>
            </div>

            <!-- ä½¿ç”¨ç¤ºä¾‹ -->
            <div class="section">
                <h2>ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹</h2>

                <h3>Python ç¤ºä¾‹</h3>
                <div class="code-block"><span class="keyword">import</span> requests

<span class="comment"># è§£å¯†è§†é¢‘</span>
url = <span class="string">'http://localhost:3000/api/decrypt'</span>
files = {<span class="string">'video'</span>: open(<span class="string">'encrypted.mp4'</span>, <span class="string">'rb'</span>)}
data = {<span class="string">'decode_key'</span>: <span class="string">'2136343393'</span>}

response = requests.post(url, files=files, data=data)

<span class="keyword">if</span> response.status_code == 200:
    <span class="keyword">with</span> open(<span class="string">'decrypted.mp4'</span>, <span class="string">'wb'</span>) <span class="keyword">as</span> f:
        f.write(response.content)
    print(<span class="string">'âœ… è§£å¯†æˆåŠŸ'</span>)</div>

                <h3>JavaScript/Node.js ç¤ºä¾‹</h3>
                <div class="code-block"><span class="keyword">const</span> FormData = require(<span class="string">'form-data'</span>);
<span class="keyword">const</span> fs = require(<span class="string">'fs'</span>);
<span class="keyword">const</span> axios = require(<span class="string">'axios'</span>);

<span class="keyword">async function</span> decryptVideo() {
  <span class="keyword">const</span> form = <span class="keyword">new</span> FormData();
  form.append(<span class="string">'decode_key'</span>, <span class="string">'2136343393'</span>);
  form.append(<span class="string">'video'</span>, fs.createReadStream(<span class="string">'encrypted.mp4'</span>));

  <span class="keyword">const</span> response = <span class="keyword">await</span> axios.post(
    <span class="string">'http://localhost:3000/api/decrypt'</span>,
    form,
    { headers: form.getHeaders(), responseType: <span class="string">'stream'</span> }
  );

  response.data.pipe(fs.createWriteStream(<span class="string">'decrypted.mp4'</span>));
}</div>
            </div>

            <!-- å¿«é€Ÿé“¾æ¥ -->
            <div class="section">
                <h2>ğŸ”— å¿«é€Ÿé“¾æ¥</h2>
                <div class="quick-links">
                    <a href="/health" class="btn" target="_blank">å¥åº·æ£€æŸ¥</a>
                    <a href="https://github.com/Evil0ctal/WeChat-Channels-Video-File-Decryption" class="btn btn-secondary" target="_blank">GitHub ä»“åº“</a>
                    <a href="https://evil0ctal.github.io/WeChat-Channels-Video-File-Decryption/" class="btn btn-secondary" target="_blank">åœ¨çº¿å·¥å…·</a>
                </div>
            </div>
        </div>

        <div class="footer">
            <p><strong>WeChat Decrypt API</strong> v2.0.0</p>
            <p>Made with â¤ï¸ by <a href="https://github.com/Evil0ctal" target="_blank">Evil0ctal</a></p>
            <p>License: MIT | <a href="https://github.com/Evil0ctal/WeChat-Channels-Video-File-Decryption" target="_blank">View on GitHub</a></p>
        </div>
    </div>

    <script>
        // è·å–æœåŠ¡çŠ¶æ€
        fetch('/health')
            .then(res => res.json())
            .then(data => {
                document.getElementById('serviceName').textContent = data.service || 'WeChat Decrypt API';
                document.getElementById('version').textContent = data.version || '2.0.0';
                document.getElementById('engine').textContent = data.engine || 'Playwright';

                if (data.wasm && data.wasm.loaded) {
                    document.getElementById('wasmStatus').textContent = 'âœ… å·²åŠ è½½';
                    document.getElementById('statusBadge').textContent = 'ğŸŸ¢ æœåŠ¡è¿è¡Œä¸­';
                } else {
                    document.getElementById('wasmStatus').textContent = 'âŒ æœªåŠ è½½';
                    document.getElementById('statusBadge').textContent = 'ğŸ”´ WASM æœªå°±ç»ª';
                    document.getElementById('statusBadge').classList.remove('online');
                }
            })
            .catch(err => {
                console.error('Failed to fetch service status:', err);
                document.getElementById('wasmStatus').textContent = 'âŒ æ£€æŸ¥å¤±è´¥';
                document.getElementById('statusBadge').textContent = 'ğŸ”´ æœåŠ¡ä¸å¯ç”¨';
                document.getElementById('statusBadge').classList.remove('online');
            });
    </script>
</body>
</html>
